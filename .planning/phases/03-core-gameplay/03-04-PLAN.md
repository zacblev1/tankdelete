---
phase: 03-core-gameplay
plan: 04
type: execute
wave: 1
depends_on: []
files_modified: [src/App.tsx]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Minimap displays marked files as red dots (not default color)"
    - "No dead/commented-out code remains from prior implementations"
  artifacts:
    - path: "src/App.tsx"
      provides: "Minimap data wired to markedFiles state, dead code removed"
  key_links:
    - from: "src/App.tsx minimapFileBlocks"
      to: "useMarkedFiles().markedFiles"
      via: "markedFiles.has(block.path) in minimap data preparation"
      pattern: "isMarked:\\s*markedFiles\\.has"
---

<objective>
Wire minimap marked-file display and remove dead code in App.tsx.

Purpose: Close the 1 remaining verification gap (minimap not reflecting marked files as red) and clean up commented-out dead code from prior implementations.
Output: Fully wired minimap + clean App.tsx with no dead code.
</objective>

<execution_context>
@/Users/zacharyblevins/.claude/get-shit-done/workflows/execute-plan.md
@/Users/zacharyblevins/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-core-gameplay/03-VERIFICATION.md
@src/App.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Wire markedFiles to minimap and remove dead code</name>
  <files>src/App.tsx</files>
  <action>
Two changes in src/App.tsx:

1. **Wire minimap marked-file display (line ~409):**
   Change the minimap data preparation from:
   ```typescript
   isMarked: false, // TODO: Wire up marking system in future plan
   ```
   to:
   ```typescript
   isMarked: markedFiles.has(block.path),
   ```
   The `markedFiles` Set is already available in scope (destructured from useMarkedFiles() at line ~62). The `block` variable in the .map() callback has a `.path` property from `allBlocks`. The Minimap component already has rendering logic to show marked files as red dots — it just needs the data wired through.

2. **Remove commented-out dead code (lines ~211-256):**
   Delete the entire commented-out `handleDeleteFile` function block. This is old deletion handler code that was replaced by the two-shot mark+delete system (useMarkedFiles hook). The active deletion logic lives in `handleProjectileHit` and `useMarkedFiles.deleteAllMarked`. The commented-out code references a different API pattern and is no longer relevant.

Do NOT change any other code. These are surgical fixes only.
  </action>
  <verify>
1. Run `npx tsc --noEmit` from project root — must pass with no errors
2. Run `npm run build` — must succeed
3. Grep for the old pattern: `grep "isMarked: false" src/App.tsx` should return nothing
4. Grep for wired pattern: `grep "isMarked: markedFiles.has" src/App.tsx` should return 1 match
5. Grep for dead code: `grep "handleDeleteFile" src/App.tsx` should return nothing
  </verify>
  <done>
Minimap data uses live markedFiles.has(block.path) for isMarked field. Commented-out handleDeleteFile block is removed. TypeScript compiles clean. Build succeeds.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes — no type errors from markedFiles.has() usage
2. `npm run build` succeeds — production build works
3. Minimap data preparation uses `markedFiles.has(block.path)` not `false`
4. No commented-out handleDeleteFile code remains in App.tsx
5. All 11/11 Phase 03 success criteria now satisfiable
</verification>

<success_criteria>
- isMarked in minimapFileBlocks uses markedFiles.has(block.path)
- No dead code (commented-out handleDeleteFile) in App.tsx
- TypeScript compiles clean
- Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/03-core-gameplay/03-04-SUMMARY.md`
</output>
